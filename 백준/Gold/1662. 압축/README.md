# [Gold V] 압축 - 1662 

[문제 링크](https://www.acmicpc.net/problem/1662) 

### 성능 요약

메모리: 113112 KB, 시간: 116 ms

### 분류

자료 구조(data_structures), 재귀(recursion), 스택(stack)

### 문제 설명

<p>압축되지 않은 문자열 S가 주어졌을 때, 이 문자열중 어떤 부분 문자열은 K(Q)와 같이 압축 할 수 있다. K는 한자리 정수이고, Q는 0자리 이상의 문자열이다. 이 Q라는 문자열이 K번 반복된다는 뜻이다. 압축된 문자열이 주어졌을 때, 이 문자열을 다시 압축을 푸는 프로그램을 작성하시오.</p>

### 입력 

 <p>첫째 줄에 압축된 문자열 S가 들어온다. S의 길이는 최대 50이다. 문자열은 (, ), 0-9사이의 숫자로만 들어온다.</p>

### 출력 

 <p>첫째 줄에 압축되지 않은 문자열의 길이를 출력한다. 이 값은 2,147,473,647 보다 작거나 같다.</p>

### 풀이 과정

 <p>처음 문제를 보자마자 괄호들을 보고 스택을 이용하는게 아닐까?라는 생각으로 무지성 접근을 시도했다. 
주어진 입력보다는 복잡한 케이스를 설정해 시뮬레이션을 돌려봤지만 스택을 이용한 올바른 구현 방법이 떠오르지 않았다. 
무지성 접근이였기에 스택을 이용해야한다는 확신도 없어서 직관적 접근으로 투포인터를 활용해 괄호들을 적절히 탐색할 방법을 고민해 보았다.
하지만, 괄호들의 상호 종속 관계(상하관계)에 의한 연산 순서를 지키는 방법이 떠오르지 않았다. 
다음으로 123(123(123)123(123)123) 이런 케이스를 고려해서 부모자식 관계와 자매관계까지 표현할 수 있는 트리구조를 이용해나 싶은 생각도 들었지만 어떻게 구현해야할지 막막했다.
해서 종이와 펜을 꺼내들고 정신을 좀 차리고 처음 고민했던 스택 방식부터 천천히 고민해 보았다. 
여는 괄호를 만날때와 닫는 괄호를 만날때 스택에 어떻게 넣고 빼주는게 좋을지 고민하며 시뮬레이션을 돌리다보니 맞는 풀이를 찾을 수 있었다. 
과정은 다음과 같다.

1. 현재 문자가 괄호가 아니면 tmp문자열에 추가한다.
2. 여는 괄호를 만나면 스택에 tmp문자열을 넣고 tmp는 빈 문자열로 초기화 시켜준다.
3. 딛는 괄호를 만나면 tmp에 들어있는 문자열과 스택의 맨위 문자열을 계산해 이번 닫는 괄호가 포함된 괄호 부분의 압축을 해제해 tmp에 저장하고 스택을 1회 pop시킨다. 
위 과정을 주어진 압축문자열을 선형 탐색하며 수행한다.

사실 높은 난이도의 문제가 아님에도 시간이 오래 걸렸다. 
풀이 과정을 되돌아 보면 이렇게 하면 되지 않을까하는 감에 의존한 접근을 하고 있었다. 
사실 이렇게 감에 의존한 접근을 하게되는 경우는 만나 보지 못했거나 익숙하지 않은 유형의 문제이기 때문이다.
스택의 개념은 쉽지만 사실 스택을 응용한 문제들은 스택 문제라고 생각하기 쉽지않고 스택 문제라고 생각하지 못하면 시간초과가 발생하거나 푸는것 조차 상당히 복잡한 경우가 많다.
생각보다 어려운 유형이니 다양한 스택 문제들을 풀 필요가 있어보인다.   </p>

### 구현 과정

 <p>처음에는 메모리 생각 못하고 그냥 압축 해제한 문자열을 직접 구해서 길이를 구할라고 했다. 문제에 친절하게 문자열 길이가 2147473647보다 작거나 같다고 알려줬는데도 말이다;; 당연하게 메모리 초과가 발생했다. 그래서 위의 풀이과정에서 언급한 tmp를 문자열을 담는게 아니라 문자열을 길이를 담고 스택에도 (문자열 길이, 마지막 숫자)를 저장해서 그냥 길이를 바로 구하도록 수정해주어 통과했다.</p>