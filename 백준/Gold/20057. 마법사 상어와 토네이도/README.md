# [Gold III] 마법사 상어와 토네이도 - 20057 

[문제 링크](https://www.acmicpc.net/problem/20057) 

### 성능 요약

메모리: 119896 KB, 시간: 756 ms

### 분류

구현(implementation), 시뮬레이션(simulation)

### 문제 설명

<p><a href="/problem/20056">마법사 상어</a>가 토네이도를 배웠고, 오늘은 토네이도를 크기가 N×N인 격자로 나누어진 모래밭에서 연습하려고 한다. 위치 (r, c)는 격자의 r행 c열을 의미하고, A[r][c]는 (r, c)에 있는 모래의 양을 의미한다.</p>

<p>토네이도를 시전하면 격자의 가운데 칸부터 토네이도의 이동이 시작된다. 토네이도는 한 번에 한 칸 이동한다. 다음은 N = 7인 경우 토네이도의 이동이다.</p>

<p style="text-align: center;"><img alt="" src="https://upload.acmicpc.net/37e7aa13-0f2b-49d6-af68-e745537b1ea3/-/preview/" style="width: 250px; height: 253px;"></p>

<p>토네이도가 한 칸 이동할 때마다 모래는 다음과 같이 일정한 비율로 흩날리게 된다.</p>

<p style="text-align: center;"><img alt="" src="https://upload.acmicpc.net/33b01ca0-4659-49f1-b126-8e042e17d3f1/-/preview/" style="width: 235px; height: 234px;"></p>

<p>토네이도가 x에서 y로 이동하면, y의 모든 모래가 비율과 α가 적혀있는 칸으로 이동한다. 비율이 적혀있는 칸으로 이동하는 모래의 양은 y에 있는 모래의 해당 비율만큼이고, 계산에서 소수점 아래는 버린다. α로 이동하는 모래의 양은 비율이 적혀있는 칸으로 이동하지 않은 남은 모래의 양과 같다. 모래가 이미 있는 칸으로 모래가 이동하면, 모래의 양은 더해진다. 위의 그림은 토네이도가 왼쪽으로 이동할 때이고, 다른 방향으로 이동하는 경우는 위의 그림을 해당 방향으로 회전하면 된다.</p>

<p>토네이도는 (1, 1)까지 이동한 뒤 소멸한다. 모래가 격자의 밖으로 이동할 수도 있다. 토네이도가 소멸되었을 때, 격자의 밖으로 나간 모래의 양을 구해보자.</p>

### 입력 

 <p>첫째 줄에 격자의 크기 N이 주어진다. 둘째 줄부터 N개의 줄에는 격자의 각 칸에 있는 모래가 주어진다. r번째 줄에서 c번째 주어지는 정수는 A[r][c] 이다.</p>

### 출력 

 <p>격자의 밖으로 나간 모래의 양을 출력한다.</p>

### 풀이 과정

문제의 조건대로 구현만 한다면 답을 구할 수 있는 빡구현 문제였다. 문제를 읽고 해당 문제를 다음과 같은 두개의 파트로 나누어 생각했다.
1. 토네이도를 문제조건대로 이동시키는 파트
2. 이동시 발생하는 모래의 이동을 계산하는 파트
두개의 로직을 적절히 구현한다면 문제를 해결할 수 있다.

### 구현 과정
1번 파트의 경우 문제에 주어진 토네이도의 이동경로를 고려해 방향이 좌-하-우-상 순으로 바뀌게 한다.
해당 방향으로 나아가는 거리는 1-1-2-2-3-3-...-(n-1)-(n-1)-(n-1) 이런 식으로 바뀌는 패턴이 있음을 인지하고 구현하였다. 
2번 파트 기본 로직은 토네이도 문제에서 제공한 그림의 비율처럼 이동후 위치의 모래를 옮겨주고 알파위치에 남은 모래를 넣어준다.
또한 밖으로 나가는 모래의 총합을 리턴해주는 식으로 구현했다. 단지 토네이도 이동 방향에따라 그림의 방향이 바뀌게되는데
이를 방향마다 일일히 구현하지 않기위해 코드의 재사용성을 높일 방안을 고민하여 구현하려고 노력했다.
코드 재사용성을 위한 나의 방식은 그림에 주어진 비율들을 토네이도 이동 방향을 절대적 방향으로 두고 절대적 방향에 대한 상대적 방향들로 생각하여 구현했다.
예를들어, 배열의 아래쪽 방향으로 나아가는 사람(A)에게 왼쪽은 우리가 배열을 바라봤을때에는 오른쪽이다. A의 오른쪽은 우리에게 왼쪽이다. A의 위쪽은 우리에게 아래쪽이다. A의 아래쪽은 우리에게 위이다.
이를 rel_di 딕셔너리에 정의 함으로써 토네이도의 절대적 방향에 따라 바뀌는 모래이동의 절대적 방향들을 구할 수 있도록 구현하여 모래 이동 기본 로직의 재사용성을 높히려 하였다.

